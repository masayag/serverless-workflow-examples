id: notifications
version: "1.0"
specVersion: "0.8"
name: "Test notifications"
description: Test notifications
dataInputSchema: schemas/notifications-input.json
functions:
  - name: createNotification
    operation: specs/notifications-openapi.yaml#createNotification
start: Notify Backstage
states:
  - name: "Notify Backstage"
    type: operation
    actions:
      - name: "Create notification"
        functionRef:
          refName: createNotification
          arguments:
            title: "Test notification"
            message: '"A notification for workflow ID " + $WORKFLOW.instanceId'
            origin: "SonataFlow"
            topic: "test-notifications"
            targetUsers: if .backstageUser != null then [.backstageUser] else [] end
            targetGroups: if .backstageGroup != null then [.backstageGroup] else [] end
    end: true
